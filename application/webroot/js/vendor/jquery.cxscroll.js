!function($){$.fn.cxScroll=function(o){if(this.length){o=$.extend({},$.cxScroll.defaults,o);var t=this,e={lock:!1,dom:{}};e.init=function(){if(e.dom.box=t.find(".history-cnt"),e.dom.list=e.dom.box.find(".history-list"),e.dom.items=e.dom.list.find("li"),e.itemSum=e.dom.items.length,!(e.itemSum<=1)){if(e.dom.prevBtn=t.find(".prev"),e.dom.nextBtn=t.find(".next"),e.itemWidth=e.dom.items.outerWidth(),e.itemHeight=e.dom.items.outerHeight(),"left"==o.direction||"right"==o.direction){if(e.itemWidth*e.itemSum<=e.dom.box.outerWidth())return;e.prevVal="left",e.nextVal="right",e.moveVal=e.itemWidth}else{if(e.itemHeight*e.itemSum<=e.dom.box.outerHeight())return;e.prevVal="top",e.nextVal="bottom",e.moveVal=e.itemHeight}e.dom.list.append(e.dom.list.html()),o.prevBtn&&!e.dom.prevBtn.length&&(e.dom.prevBtn=$("<a></a>",{"class":"prev"}).prependTo(t)),o.nextBtn&&!e.dom.nextBtn.length&&(e.dom.nextBtn=$("<a></a>",{"class":"next"}).prependTo(t)),o.auto&&t.hover(function(){o.auto=!1,e.lock=!1,e.off()},function(){o.auto=!0,e.lock=!1,e.on()}),e.bindEvents(),e.on()}},e.bindEvents=function(){o.nextBtn&&e.dom.prevBtn.length&&e.dom.nextBtn.bind("click",function(){e.lock||e["goto"](e.nextVal,o.accel)}),o.prevBtn&&e.dom.prevBtn.length&&e.dom.prevBtn.bind("click",function(){e.lock||e["goto"](e.prevVal,o.accel)})},e.on=function(){o.auto&&("undefined"!=typeof e.run&&clearTimeout(e.run),e.run=setTimeout(function(){e["goto"](o.direction)},o.time))},e.off=function(){e.dom.box.stop(!0),"undefined"!=typeof e.run&&clearTimeout(e.run)},e["goto"]=function(t,i){e.off(),o.controlLock&&(e.lock=!0);var n,m,l=i||o.speed;switch(t){case"left":case"top":n=0,"left"==t?(0==parseInt(e.dom.box.scrollLeft(),10)&&e.dom.box.scrollLeft(e.itemSum*e.moveVal),m=e.dom.box.scrollLeft()-e.moveVal*o.step,m%e.itemWidth>0&&(m-=m%e.itemWidth-e.itemWidth),n>m&&(m=n),e.dom.box.animate({scrollLeft:m},l,o.easing,function(){parseInt(e.dom.box.scrollLeft(),10)<=n&&e.dom.box.scrollLeft(0)})):(0==parseInt(e.dom.box.scrollTop(),10)&&e.dom.box.scrollTop(e.itemSum*e.moveVal),m=e.dom.box.scrollTop()-e.moveVal*o.step,m%e.itemHeight>0&&(m-=m%e.itemHeight-e.itemHeight),n>m&&(m=n),e.dom.box.animate({scrollTop:m},l,o.easing,function(){parseInt(e.dom.box.scrollTop(),10)<=n&&e.dom.box.scrollTop(0)}));break;case"right":case"bottom":n=e.itemSum*e.moveVal,"right"==t?(m=e.dom.box.scrollLeft()+e.moveVal*o.step,m%e.itemWidth>0&&(m-=m%e.itemWidth),m>n&&(m=n),e.dom.box.animate({scrollLeft:m},l,o.easing,function(){parseInt(e.dom.box.scrollLeft(),10)>=n&&e.dom.box.scrollLeft(0)})):(m=e.dom.box.scrollTop()+e.moveVal*o.step,m%e.itemHeight>0&&(m-=m%e.itemHeight),m>n&&(m=n),e.dom.box.animate({scrollTop:m},l,o.easing,function(){parseInt(e.dom.box.scrollTop(),10)>=n&&e.dom.box.scrollTop(0)}))}e.dom.box.queue(function(){o.controlLock&&(e.lock=!1),e.on(),$(this).dequeue()})},e.init()}},$.cxScroll={defaults:{direction:"right",easing:"swing",step:1,accel:160,speed:800,time:4e3,auto:!0,prevBtn:!0,nextBtn:!0,safeLock:!0}}}(jQuery);