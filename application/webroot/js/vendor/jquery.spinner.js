!function($){$.fn.spinner=function(a){return this.each(function(){function t(a){o.val(l()+a),e(o)}function e(a){clearTimeout(r.data("timeout"));var t=n(a);i(t)||o.trigger("update",[a,t])}function n(a){var t=l();if(t<=s.min?v.attr("disabled","disabled"):v.removeAttr("disabled"),a.toggleClass("invalid",i(t)).toggleClass("passive",0===t),i(t)){var e=setTimeout(function(){o.val(r.data("lastValidValue")),n(a)},500);r.data("timeout",e)}else r.data("lastValidValue",t);return t}function i(a){return isNaN(+a)||a<s.min}function l(a){return a=a||o,parseInt(a.val()||0,10)}var u={value:1,min:0},s=$.extend(u,a),d={up:38,down:40},r=$("<div></div>");r.addClass("spinner");var o=$(this).addClass("value").attr("maxlength","2").val(s.value).bind("keyup paste change",function(a){var n=$(this);a.keyCode==d.up?t(1):a.keyCode==d.down?t(-1):l(n)!=r.data("lastValidValue")&&e(n)});o.wrap(r);var c=$('<button class="increase">+</button>').click(function(){t(1)}),v=$('<button class="decrease">-</button>').click(function(){t(-1)});n(o),r.data("lastValidValue",s.value),o.before(v),o.after(c)})}}(jQuery);